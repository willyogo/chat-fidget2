import{EtherscanProvider as e}from"@ethersproject/providers";import{QuantityToBigNumber as t}from"@privy-io/js-sdk-core";import{CHAIN_ID_MAINNET as r,PRIVY_ETHERSCAN_ID as a}from"../../constants.mjs";async function n({accessToken:e,entropyId:t,entropyIdVerifier:a,transactingWallet:n,walletProxy:o,transactionRequest:s,provider:i,requesterAppId:c}){!function(e){for(let t of["gasLimit","gasPrice","value","maxPriorityFeePerGas","maxFeePerGas"]){let r=e[t];if(void 0!==r&&!function(e){let t="number"==typeof e,r="bigint"==typeof e,a="string"==typeof e&&/^-?0x[a-f0-9]+$/i.test(e);return t||r||a}(r))throw Error(`Transaction request property '${t}' must be a valid number, bigint, or hex string representing a quantity`)}if("number"!=typeof e.chainId)throw Error("Transaction request property 'chainId' must be a number")}(s=Object.assign({chainId:r},s));let u=(await o.rpc({entropyId:t,entropyIdVerifier:a,hdWalletIndex:n.walletIndex??0,chainType:"ethereum",accessToken:e,requesterAppId:c,request:{method:"eth_signTransaction",params:[s]}})).response.data;return await i.sendTransaction(u)}async function o(e,r,a,n){let o=await n.getBalance(e),s=r.value||0,i=!o.sub(t(s)).sub(a).isNegative();return{balance:o,hasSufficientFunds:i}}async function s(){let t=new e(r,a);return await t.getEtherPrice()}function i(e){return{to:e.to,from:e.from,contractAddress:e.contractAddress,transactionIndex:e.transactionIndex,root:e.root,logsBloom:e.logsBloom,blockHash:e.blockHash,transactionHash:e.transactionHash,logs:e.logs,blockNumber:e.blockNumber,confirmations:e.confirmations,byzantium:e.byzantium,type:e.type,status:e.status,gasUsed:e.gasUsed.toHexString(),cumulativeGasUsed:e.cumulativeGasUsed.toHexString(),effectiveGasPrice:e.effectiveGasPrice?e.effectiveGasPrice.toHexString():void 0}}export{i as formatReceipt,o as getAndCheckBalance,s as getEtherPrice,n as sendTransaction};
